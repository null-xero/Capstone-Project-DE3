version: 1
project_id: 5a24687f-2e39-404d-b0a6-2e08f24b20d4
default_environment: environment_meltano

environments:
- name: environment_meltano
  config:
    snowflake:
      account: ${SNOWFLAKE_ACCOUNT}
      user: ${SNOWFLAKE_USER}
      password: ${SNOWFLAKE_PASSWORD}
      database: ${SNOWFLAKE_DATABASE}
      warehouse: ${SNOWFLAKE_WAREHOUSE}
      role: ${SNOWFLAKE_ROLE}
      schema: ${SNOWFLAKE_SCHEMA}
plugins:
  extractors:
  - name: tap-spreadsheets-anywhere
    namespace: tap_spreadsheets_anywhere
    variant: ets
    pip_url: git+https://github.com/ets/tap-spreadsheets-anywhere.git
    config:
      tables:
      - path: file://data/
        name: returned_product
        pattern: returned_product.json
        start_date: '2023-01-01T00:00:00Z'
        key_properties: [order_id]
        format: json

  loaders:
  - name: target-snowflake
    variant: meltanolabs
    pip_url: meltanolabs-target-snowflake
    config:
      add_record_metadata: true
      clean_up_batch_files: true
      database: DATABROS_DATABASE
      hard_delete: false
      load_method: append-only
      role: DAB_ROLE
      schema: DAB_SCHEMA
      use_browser_authentication: false
      validate_records: true
      warehouse: DAB_WAREHOUSE

  transformers:
  - name: dbt-snowflake
    variant: dbt-labs
    pip_url: dbt-core~=1.3.0 dbt-snowflake~=1.3.0
    config:
      account: ${TARGET_SNOWFLAKE_ACCOUNT}
      user: ${TARGET_SNOWFLAKE_USER}
      password: ${TARGET_SNOWFLAKE_PASSWORD}
      database: DATABROS_DATABASE
      warehouse: DAB_WAREHOUSE
      role: DAB_ROLE
      schema: DAB_SCHEMA
      profiles_dir: $MELTANO_PROJECT_ROOT/transform/profiles/snowflake
      project_dir: $MELTANO_PROJECT_ROOT/transform
